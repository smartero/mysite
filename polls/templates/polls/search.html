{% extends 'polls/layout.html' %}

{% block main %}
<script src="https://api-maps.yandex.ru/2.1/?apikey=<515f3159-bfbe-4a5b-9067-a36951149219>&lang=en_US" type="text/javascript"></script>
<script type='text/javascript'>
  ymaps.ready(init);
  function init(){
    var suggestView1 = new ymaps.SuggestView('dep_address');    
    var suggestView2 = new ymaps.SuggestView('arr_address');    
  };
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('#pax').addEventListener('keyup', function(){
      var input = parseInt(document.querySelector('#pax').value);
      var li = document.querySelectorAll('ul li');
      for (i = 0; i < li.length; i++) {
        var number = parseInt(li[i].innerHTML);
        li[i].style.display = (number < input ? 'none': '');
      };
    });
  });
</script>
<script>
  $(document).ready(function() {
    $( "#dep_date" ).datepicker();
  });
  </script>
  <script src=https://code.jquery.com/jquery-3.3.1.js></script>
  <script src=https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js></script>
  <script src=https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js></script>
  </script>
  <script>
  $(document).ready(function() {
    $('#example').DataTable();
} );
  </script>
  
  <h2>Search for a trip</h2>
  <br>
  <form class="form-group"  autocomplete="off">
    <div class='row'>
    <div class="col">
      
      <label for="dep_address">From:</label>   
      <input class="form-control" id="dep_address" type="search">
    </div>
    <div class="col">
      <label for="arr_address">To:</label>   
      <input class="form-control" id="arr_address" type="search">
    </div>
    <div class="col">
      <label for="date">Date:</label>
      <input class="form-control" id="dep_date">
    </div>
    <div class="col">
      <label for="">Passengers:</label>
      <input class="form-control" id="pax">
    </div>
  </div>
</form>

<table class="table table-sm" id="example">
  <thead>
    <tr>
      <th>#</th>
      <th>From</th>
      <th>To</th>
    </tr>
  </thead>
  {% for result in results %}
  <tbody>
    <tr>
      <td scope="row"></td>
      <td>{{ result.dep_address }}</td>
      <td>{{ result.arr_address }}</td>
    </tr>
  </tbody>
  {% endfor %}
</table>

{% endblock %}